<!DOCTYPE html>
{% load tz %}
<html>
<head>
    <meta charset="UTF-8">
    <style>
        @page { size: A4; margin: 2cm; }
        body { font-family: 'Georgia', serif; font-size:12pt; color:#0b1220; background: #ffffff; }
        .header { padding:10px 0; border-bottom:1px solid #e6e6e6; }
        .company { float:left; }
        .invoice-box { float:right; text-align:right; background:#111827; color:#ffffff; padding:8px 12px; border-radius:6px; }
        table { width:100%; border-collapse:collapse; margin-top:18px; }
        th, td { padding:10px; border-bottom:1px solid #f1f5f9; }
        th { text-align:left; }
        .totals { float:right; width:36%; margin-top:12px; }
        .footer { clear:both; margin-top:30px; color:#6b7280; text-align:center; }
    </style>
</head>
<body>
    {% if invoice and business %}
    <div class="header clearfix">
        <div class="company">
            {% if business.logo %}
                <img src="{{ business.logo.url }}" style="max-width:120px; max-height:70px; margin-right:8px;" alt="Logo">
            {% endif %}
            <div style="font-weight:700; font-size:1.1rem;">{{ business.business_name }}</div>
            <div style="color:#475569; font-size:12px;">{{ business.address }}</div>
        </div>
        <div class="invoice-box">
            <div style="font-weight:700;">INVOICE</div>
            <div style="font-size:14px;">#{{ invoice.invoice_number }}</div>
            <div style="font-size:12px;">{{ invoice.invoice_date }}</div>
        </div>
    </div>
    {% endif %}

    <div style="clear:both;"></div>
    <div style="margin-top:16px;"><strong>Bill To:</strong><br>{% if invoice.client_name %}{{ invoice.client_name }}{% else %}{{ invoice.client.name }}{% endif %}</div>

    <table>
        <thead><tr><th>Description</th><th style="width:12%;text-align:right;">Qty</th><th style="width:20%;text-align:right;">Unit</th><th style="width:20%;text-align:right;">Total</th></tr></thead>
        <tbody>
            {% if invoice and invoice.items.exists %}
                {% for item in invoice.items.all %}
                <tr>
                    <td>{{ item.description }}</td>
                    <td style="text-align:right;">{{ item.quantity }}</td>
                    <td style="text-align:right;">{{ invoice.currency }} {{ item.unit_price }}</td>
                    <td style="text-align:right;">{{ invoice.currency }} {{ item.line_total }}</td>
                </tr>
                {% endfor %}
            {% else %}
                <tr><td colspan="4" style="text-align:center;padding:20px;color:#9ca3af;">No items</td></tr>
            {% endif %}
        </tbody>
    </table>

    <div class="totals">
        <table>
            <tr><td>Subtotal:</td><td style="text-align:right;">{{ invoice.currency }} {{ invoice.subtotal }}</td></tr>
            <tr><td>Tax:</td><td style="text-align:right;">{{ invoice.currency }} {{ invoice.tax_amount }}</td></tr>
            <tr style="font-weight:700;"><td>Total:</td><td style="text-align:right;">{{ invoice.currency }} {{ invoice.total_amount }}</td></tr>
        </table>
    </div>

    <div style="clear:both;"></div>
    <div class="footer">Template 5 â€” Elegant Dark</div>
</body>
</html>
